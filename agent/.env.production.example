# =============================================================================
# Production Environment Configuration
# =============================================================================
# Copy to .env and fill in all values before starting.
# All values marked REQUIRED must be set — the app will refuse to start without them.
#
# Generate secrets with: openssl rand -hex 32
# Generate Fernet key with: python3 -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"

# --- Production Mode (enables startup validation of required secrets) ---
PRODUCTION_MODE=true

# --- Domain Configuration ---
DOMAIN=agent.yourdomain.com
DEPLOY_DOMAIN=projects.yourdomain.com
CERTBOT_EMAIL=you@yourdomain.com

# =============================================================================
# Infrastructure
# =============================================================================

# Database — REQUIRED: change password
POSTGRES_USER=agent
POSTGRES_PASSWORD=CHANGE_ME_STRONG_PASSWORD
DATABASE_URL=postgresql+asyncpg://agent:CHANGE_ME_STRONG_PASSWORD@postgres:5432/agent

# Redis — REQUIRED: set password
REDIS_PASSWORD=CHANGE_ME_STRONG_PASSWORD
REDIS_URL=redis://redis:6379

# MinIO — REQUIRED: change credentials
MINIO_ACCESS_KEY=CHANGE_ME_MINIO_ACCESS
MINIO_SECRET_KEY=CHANGE_ME_MINIO_SECRET
MINIO_ENDPOINT=minio:9000
MINIO_BUCKET=agent-files
MINIO_PUBLIC_URL=https://agent.yourdomain.com/files

# =============================================================================
# Security — ALL REQUIRED
# =============================================================================

# Inter-service auth token — REQUIRED (openssl rand -hex 32)
SERVICE_AUTH_TOKEN=

# Portal JWT signing secret — REQUIRED (openssl rand -hex 32)
PORTAL_JWT_SECRET=

# Credential encryption key — REQUIRED (Fernet key)
CREDENTIAL_ENCRYPTION_KEY=

# =============================================================================
# LLM API Keys (at least one required)
# =============================================================================

ANTHROPIC_API_KEY=
OPENAI_API_KEY=
GOOGLE_API_KEY=

# Model defaults
DEFAULT_MODEL=claude-sonnet-4-20250514
SUMMARIZATION_MODEL=gpt-4o-mini
EMBEDDING_MODEL=text-embedding-3-small

# =============================================================================
# Platform Bot Tokens (enable the platforms you use)
# =============================================================================

DISCORD_TOKEN=
TELEGRAM_TOKEN=
SLACK_BOT_TOKEN=
SLACK_APP_TOKEN=

# =============================================================================
# Portal OAuth (at least one provider needed for portal login)
# =============================================================================

PORTAL_OAUTH_REDIRECT_URI=https://agent.yourdomain.com/auth/callback

# Discord OAuth2
DISCORD_CLIENT_ID=
DISCORD_CLIENT_SECRET=

# Google OAuth2
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=

# Slack OAuth2
SLACK_CLIENT_ID=
SLACK_CLIENT_SECRET=

# =============================================================================
# Portal Config
# =============================================================================

# Bind portal to localhost only — nginx handles external traffic
PORTAL_PORT=127.0.0.1:8080

# Admin API key for dashboard access
ADMIN_API_KEY=

# =============================================================================
# Claude Code Module
# =============================================================================

# Host path to shared Claude credentials (optional, per-user creds preferred)
CLAUDE_AUTH_PATH=
SSH_KEY_PATH=
GH_CONFIG_PATH=
GIT_CONFIG_PATH=

CLAUDE_CODE_TIMEOUT=600
CLAUDE_CODE_IMAGE=my-claude-code-image

# MUST be an absolute host path (used in docker -v mounts)
CLAUDE_TASK_VOLUME=/home/deploy/agent/data/claude_tasks

# Default git identity for bot-initiated tasks
CLAUDE_CODE_GIT_AUTHOR_NAME=Agent Bot
CLAUDE_CODE_GIT_AUTHOR_EMAIL=bot@yourdomain.com

# =============================================================================
# Deployer
# =============================================================================

DEPLOY_PORT_START=4000
DEPLOY_PORT_END=4100
DEPLOY_BASE_DOMAIN=projects.yourdomain.com
DEPLOY_NETWORK=deploy-net

# =============================================================================
# Location (OwnTracks)
# =============================================================================

LOCATION_PORT=127.0.0.1:8100
OWNTRACKS_ENDPOINT_URL=https://agent.yourdomain.com/pub

# =============================================================================
# Agent Behavior
# =============================================================================

MAX_AGENT_ITERATIONS=10
CONVERSATION_TIMEOUT_MINUTES=30
WORKING_MEMORY_MESSAGES=12
DEFAULT_GUEST_TOKEN_BUDGET=5000
DEFAULT_GUEST_MODULES=research,file_manager,code_executor,knowledge

# =============================================================================
# Optional External Services
# =============================================================================

# Garmin Connect
GARMIN_EMAIL=
GARMIN_PASSWORD=

# Renpho Smart Scale
RENPHO_EMAIL=
RENPHO_PASSWORD=

# MyFitnessPal
MFP_USERNAME=
MFP_PASSWORD=

# Atlassian (Jira + Confluence)
ATLASSIAN_URL=
ATLASSIAN_USERNAME=
ATLASSIAN_API_TOKEN=

# Git Platform
GIT_PLATFORM_PROVIDER=github
GIT_PLATFORM_TOKEN=
